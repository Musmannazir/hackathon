<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
  <meta name="theme-color" content="#059669">
  <meta name="description" content="ุฏูุง ูพฺุงู - ุงูพู ุฏูุง ฺฉ ุฌุงูฺ ุงูุฑ ุชุตุฏู ฺฉุฑฺบ">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="ุฏูุง ูพฺุงู">
  <title>ุฏูุง ูพฺุงู</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/static/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/static/icon.svg">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div id="app">

    <!-- Hidden camera input (always accessible regardless of screen) -->
    <input type="file" accept="image/*" capture="environment" id="camera-input" class="hidden-input">

    <!-- ===== PROFILE SETUP SCREEN ===== -->
    <div id="screen-profile" class="screen hidden">
      <div class="screen-content">
        <div class="logo-section">
          <div class="logo" aria-hidden="true">๐</div>
          <h1 class="app-title">ุฏูุง ูพฺุงู</h1>
          <p class="app-subtitle">ุงูพู ุฏูุง ฺฉ ุฌุงูฺ ฺฉุฑฺบ</p>
        </div>

        <div class="card">
          <h2 class="card-title">ุงูพู ูุนูููุงุช</h2>
          <p class="card-subtitle">ุจุชุฑ ุฑููุงุฆ ฺฉ ู  ูุนูููุงุช ุฏุฑฺฉุงุฑ ฺบ</p>

          <!-- Age -->
          <div class="form-group">
            <label class="form-label" for="inp-age">ุนูุฑ <span class="label-hint">(ุณุงู)</span></label>
            <input type="number" id="inp-age" class="form-input" inputmode="numeric" placeholder="ูุซูุงู 35" min="0" max="120">
          </div>

          <!-- Gender -->
          <div class="form-group">
            <label class="form-label">ุฌูุณ</label>
            <div class="btn-group">
              <button type="button" class="select-btn" data-field="gender" data-value="male" aria-label="ูุฑุฏ">
                <span class="select-icon" aria-hidden="true">๐จ</span>
                <span>ูุฑุฏ</span>
              </button>
              <button type="button" class="select-btn" data-field="gender" data-value="female" aria-label="ุนูุฑุช">
                <span class="select-icon" aria-hidden="true">๐ฉ</span>
                <span>ุนูุฑุช</span>
              </button>
            </div>
          </div>

          <!-- Weight -->
          <div class="form-group">
            <label class="form-label" for="inp-weight">ูุฒู <span class="label-hint">(ฺฉููฺฏุฑุงู)</span></label>
            <input type="number" id="inp-weight" class="form-input" inputmode="numeric" placeholder="ูุซูุงู 70" min="1" max="300">
          </div>

          <!-- Pregnancy (shown only for females) -->
          <div class="form-group hidden" id="grp-pregnancy">
            <label class="form-label">ฺฉุง ุขูพ ุญุงูู ฺบุ</label>
            <div class="btn-group">
              <button type="button" class="select-btn" data-field="pregnant" data-value="true" aria-label="ุงฺบ">ุงฺบ</button>
              <button type="button" class="select-btn" data-field="pregnant" data-value="false" aria-label="ูฺบ">ูฺบ</button>
            </div>
          </div>

          <!-- Allergies -->
          <div class="form-group">
            <label class="form-label" for="inp-allergies">ุงูุฑุฌุงฺบ <span class="label-hint">(ุงุฎุชุงุฑ)</span></label>
            <input type="text" id="inp-allergies" class="form-input" placeholder="ูุซูุงู ูพูุณููุ ุงุณูพุฑู">
          </div>
        </div>

        <button class="primary-btn" id="btn-save-profile">
          ุดุฑูุน ฺฉุฑฺบ
        </button>
      </div>
    </div>

    <!-- ===== HOME SCREEN ===== -->
    <div id="screen-home" class="screen hidden">
      <div class="header">
        <span class="header-spacer"></span>
        <span class="header-title">๐ ุฏูุง ูพฺุงู</span>
        <button class="icon-btn" id="btn-settings" aria-label="ุชุฑุชุจุงุช">โ๏ธ</button>
      </div>

      <div class="screen-content center-content">
        <div class="scan-section">
          <button class="scan-btn" id="btn-scan" aria-label="ุฏูุง ุงุณฺฉู ฺฉุฑฺบ">
            <span class="scan-icon" aria-hidden="true">๐ท</span>
            <span class="scan-text">ุฏูุง ุงุณฺฉู ฺฉุฑฺบ</span>
            <span class="scan-hint">ุชุตูุฑ ูฺบ ุง ฺฏูุฑ ุณ ฺููฺบ</span>
          </button>
          <p class="home-tip">
            ุฏูุง ฺฉ ูพูนุ ุจูุชูุ ุง ูุณุฎ ฺฉ ุชุตูุฑ ูฺบ
          </p>
        </div>
      </div>
    </div>

    <!-- ===== LOADING SCREEN ===== -->
    <div id="screen-loading" class="screen hidden">
      <div class="screen-content center-content">
        <div class="loading-section">
          <div class="loading-icon" aria-hidden="true">๐</div>
          <div class="loading-dots" aria-hidden="true">
            <span>โข</span><span>โข</span><span>โข</span>
          </div>
          <p class="loading-text">ุชุฌุฒ ู ุฑุง </p>
          <p class="loading-subtext">ุจุฑุง ฺฉุฑู ุชฺพูฺุง ุงูุชุธุงุฑ ฺฉุฑฺบ</p>
        </div>
      </div>
    </div>

    <!-- ===== RESULTS SCREEN ===== -->
    <div id="screen-results" class="screen hidden">
      <div class="header">
        <button class="icon-btn" id="btn-back" aria-label="ูุงูพุณ">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
        <span class="header-title">ูุชุงุฆุฌ</span>
        <span class="header-spacer"></span>
      </div>

      <div class="screen-content">
        <!-- Image Preview -->
        <div class="preview-card" id="preview-card">
          <img id="preview-img" src="" alt="ุฏูุง ฺฉ ุชุตูุฑ">
        </div>

        <!-- Error Container (shown when not_medicine or error) -->
        <div id="error-container" class="hidden">
          <div class="card status-card status-warning">
            <div class="status-label" id="error-message"></div>
            <p class="card-content" style="margin-top:12px">ุฏูุจุงุฑ ุตุงู ุชุตูุฑ ู ฺฉุฑ ฺฉูุดุด ฺฉุฑฺบ</p>
          </div>
        </div>

        <!-- Results Container -->
        <div id="results-content">
          <!-- Medicine Name -->
          <div class="card">
            <div class="card-emoji" aria-hidden="true">๐</div>
            <h3 class="card-title" id="medicine-name"></h3>
          </div>

          <!-- What does this medicine do? -->
          <div class="card">
            <div class="card-emoji" aria-hidden="true">๐</div>
            <h3 class="card-title"> ุฏูุง ฺฉุง ุ</h3>
            <p class="card-content" id="explanation-text"></p>
          </div>

          <!-- Authenticity Check -->
          <div class="card status-card" id="card-authenticity">
            <div class="card-emoji" aria-hidden="true">๐</div>
            <h3 class="card-title">ุงุตู ุง ูููุ</h3>
            <div class="status-label" id="auth-label"></div>
            <ul class="reasons-list" id="auth-reasons"></ul>
            <div class="details-section">
              <button class="details-btn" onclick="toggleDetails(this)">ุชูุตูุงุช โผ</button>
              <div class="details-content" id="auth-details"></div>
            </div>
          </div>

          <!-- Safety Check -->
          <div class="card status-card" id="card-safety">
            <div class="card-emoji" aria-hidden="true">๐ก๏ธ</div>
            <h3 class="card-title">ุขูพ ฺฉ ู ูุญููุธุ</h3>
            <div class="status-label" id="safety-label"></div>
            <ul class="reasons-list" id="safety-warnings"></ul>
            <div class="details-section">
              <button class="details-btn" onclick="toggleDetails(this)">ุชูุตูุงุช โผ</button>
              <div class="details-content" id="safety-details"></div>
            </div>
          </div>

          <!-- Dosage -->
          <div class="card">
            <div class="card-emoji" aria-hidden="true">โฐ</div>
            <h3 class="card-title">ุฎูุฑุงฺฉ</h3>
            <p class="card-content" id="dosage-text"></p>
          </div>
        </div>

        <!-- Disclaimer -->
        <div class="disclaimer">
          โ๏ธ  ุทุจ ูุดูุฑ ูฺบ  ูุด ฺุงฺฉูนุฑ ุณ ูุดูุฑ ฺฉุฑฺบ
        </div>

        <!-- Scan Again -->
        <button class="primary-btn" id="btn-scan-again">
          ๐ท ูุฆ ุฏูุง ุงุณฺฉู ฺฉุฑฺบ
        </button>
      </div>
    </div>

  </div>

  <script src="/static/app.js"></script>
</body>
</html>
